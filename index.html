<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Kira Decorations</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="images/logo.png" type="image/png">
</head>
<body>

<header class="main-header">

  

  <!-- ุงูููุฌู -->
  <div class="logo">
    <img src="images/logo.png" alt="Logo">
  </div>

<button id="loginBtn" class="btn">
  ุชุณุฌูู ุจุฌูุฌู
</button>
<!-- ุฒุฑุงุฑ ุงููููู -->
<div class="menu-toggle" onclick="toggleMenu()">โฐ</div>

<!-- ุงููุงุฆูุฉ -->
<div class="side-menu" id="sideMenu">

  <span class="close-btn" onclick="toggleMenu()">ร</span>

  <a href="index.html">ุงูุฑุฆูุณูุฉ</a>
  <a href="about.html">ูู ูุญู</a>
  <a href="products.html">ููุชุฌุงุชูุง</a>
  <a href="gallery.html">ุฃุนูุงููุง</a>
  <a href="contact.html">ุชูุงุตู ูุนูุง</a>

</div>
  

 <div class="header-tools">

  <!-- ุฒุฑุงุฑ ุงููุถุน -->
  <button id="themeToggle">๐</button>

  <!-- ุฒุฑุงุฑ ุงูุณูุฉ -->
  <div class="cart-icon" onclick="toggleCart()">
    ๐ <span id="cart-count">0</span>
  </div>

</div>

<!-- ุงููุงุฑุช (ุฎููู ุจุฑู ุงูููุฏุฑ) -->
<div class="cart-box" id="cartBox">

  <h3>ุณูุฉ ุงููุดุชุฑูุงุช</h3>

  <div id="cart-items"></div>

  <button onclick="toggleDetails()" class="btn">
    ุชูุงุตูู
  </button>

  <div id="cart-details" class="cart-details"></div>

</div>
</header>


<section class="hero">
  <h1>ูุญููู ุฃููุงุฑู ุฅูู ุฏูููุฑ ูุงุฎุฑ</h1>
  <p>ุชุตููู ุฏุงุฎูู ูุฎุงุฑุฌู ุจุงุญุชุฑุงููุฉ</p>
  <a href="contact.html" class="btn">ุชูุงุตู ูุนูุง</a>
</section>

<script src="js/script.js"></script>
<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-item">
      <span>๐</span>
      <a href="tel:01552101040">01552101040</a>
    </div>

    <div class="footer-item">
      <span>๐</span>
      <p>ุงูุนุจูุฑ - ุงูุดุจุงุจ - ุงูู ุงูุณุจุนูู - ุณูุชุฑ ุงูุจุงุดุง  </p>
    </div>
  </div>

  <p class="copyright">
  ุดุฑูุฉ ููุฑุฉ ููุฏูููุฑ
  </p>
</footer>
</div>
<script type="module">

// ===== Firebase =====
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

// ===== ุฅุนุฏุงุฏุงุช =====
const firebaseConfig = {
  apiKey: "AIzaSyAg81TG47I0VgdfuZgyxFJde2f527PE6DA",
  authDomain: "kira-4c722.firebaseapp.com",
  projectId: "kira-4c722",
  storageBucket: "kira-4c722.firebasestorage.app",
  messagingSenderId: "540540067705",
  appId: "1:540540067705:web:8a6a57a861db879b44d9a8",
  measurementId: "G-WT8BN01H5D"
};

// ===== ุชุดุบูู Firebase =====
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();
const db = getFirestore(app);

// ===== ุชุณุฌูู ุงูุฏุฎูู =====
window.loginWithGoogle = function() {
  signInWithPopup(auth, provider)
    .then((result) => {
      const user = result.user;

      console.log("ุชู ุชุณุฌูู ุงูุฏุฎูู:", user);

      // ุชุญููู ูุตูุญุฉ ุงูุจูุงูุงุช
      window.location.href = "profile.html";
    })
    .catch((error) => {
      alert(error.message);
    });
}

// ===== ูุชุงุจุนุฉ ุญุงูุฉ ุงููุณุชุฎุฏู =====
onAuthStateChanged(auth, (user) => {
  const btn = document.getElementById("loginBtn");

  if (!btn) return; // ุนูุดุงู ูู ุงูุตูุญุฉ ููููุงุด ุฒุฑุงุฑ

  if (user) {
    console.log("ูุณุชุฎุฏู:", user);

    btn.innerHTML = `
      <img src="${user.photoURL}" style="width:25px;height:25px;border-radius:50%">
      ${user.displayName}
    `;

    btn.onclick = logout;

  } else {
    console.log("ูุด ูุณุฌู");

    btn.innerHTML = "ุชุณุฌูู ุจุฌูุฌู";
    btn.onclick = loginWithGoogle;
  }
});

// ===== ุชุณุฌูู ุงูุฎุฑูุฌ =====
window.logout = function() {
  signOut(auth)
    .then(() => {
      alert("ุชู ุชุณุฌูู ุงูุฎุฑูุฌ");
      location.reload();
    })
    .catch((error) => {
      alert(error.message);
    });
}

function toggleMenu() {
  document.getElementById("sideMenu").classList.toggle("active");
}

</script>
  
</body>
</html>
